<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Career Planning – FAQ (Admin)</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet" />
  <style>
    :root{
      --green:#275D2B;
      --green-100:#ECF5EB;
      --peach:#FFEED9;
      --peach-cc:#FFEED9CC;
      --text:#414141;
      --muted:#8F8F8F;
      --radius-24:24px;
      --radius-16:16px;
    }
    *{box-sizing:border-box}
    body{
      margin:0; font-family:'Poppins',sans-serif;
      background:#97C194; color:var(--text);
    }

    /* MAIN WRAPPER (890 + paddings per spec) */
    .wrap{
      width:890px; margin:32px auto; background:#fff; border-radius:var(--radius-24);
      padding:60px 100px; /* top/right/bottom/left from spec */
    }

    /* HEADER TILES */
    .tiles{display:flex; gap:20px; margin-bottom:28px;}
    .tile{
      width:326px; height:152px; border-radius:16px; display:flex; align-items:center; justify-content:center;
      font-weight:600; font-size:24px; text-align:center; cursor:pointer; user-select:none;
    }
    .tile--green{
      background:var(--green); color:#fff; padding:82px 41px; /* per spec */
    }
    .tile--light{
      background:var(--green-100); color:var(--text); padding:44px 60px; /* per spec */
    }

    /* FAQ LIST */
    .faq-list{display:flex; flex-direction:column; gap:18px; margin-top:14px;}
    .faq-item{
      width:690px; background:var(--peach-cc); border-radius:16px; padding:18px 22px; position:relative;
    }
    .faq-q{font-weight:700; font-size:20px; margin:0 48px 8px 0;}
    .faq-a{margin:0; color:var(--text); line-height:1.5;}
    .faq-actions{
      position:absolute; top:14px; right:14px; display:flex; gap:10px;
    }
    .icon-btn{
      width:32px; height:32px; border-radius:8px; border:none; background:#fff; cursor:pointer;
      display:grid; place-items:center;
    }
    .icon-btn svg{width:16px; height:16px}

    /* Add button (footer) */
    .add-wrap{display:flex; justify-content:center; margin-top:24px}
    .btn-add{
      background:#E8812E; color:#fff; border:none; border-radius:24px; padding:10px 24px; cursor:pointer; font-weight:600;
    }

    /* MODAL */
    .modal-backdrop{
      position:fixed; inset:0; background:rgba(0,0,0,.25); display:none; align-items:center; justify-content:center; z-index:20;
    }
    .modal{
      width:560px; background:#fff; border-radius:16px; padding:20px;
    }
    .modal h3{margin:0 0 12px 0}
    .field{display:flex; flex-direction:column; gap:6px; margin-bottom:12px}
    .field label{font-weight:500; color:var(--muted)}
    .field input,.field textarea{
      border:1px solid #BFBFBF; border-radius:8px; padding:10px 12px; font:inherit; width:100%;
    }
    .field textarea{min-height:120px; resize:vertical}
    .modal-actions{display:flex; gap:10px; justify-content:flex-end; margin-top:10px}
    .btn{border:none; border-radius:10px; padding:10px 14px; cursor:pointer}
    .btn-primary{background:var(--green); color:#fff}
    .btn-ghost{background:#f3f4f6}
    .empty{text-align:center; color:#6b6b6b; margin-top:8px}
    @media (max-width:1180px){
      .wrap{width:90%; padding:40px 30px}
      .faq-item{width:100%}
      .tiles{flex-wrap:wrap}
    }
  </style>
</head>
<body>
     <aside class="sidebar" id="sidebar">
    <!-- Логотип -->
    <img class="logo" src="../assets/sidebar/IPS Logo (2).svg" alt="Logo" id="logoExpanded" />
  
    
    <p style="margin-left: 12px; font-weight: 600;">Admin</p>
  
    <!-- Навигация -->
    <nav>
      <a href="admin-requests.html"><img src="../assets/sidebar/profile.svg" /><span>Профайли</span></a>
      <a href="admin-certificate.html"><img src="../assets/sidebar/news.svg" /><span>Сертифікати</span></a>
      <a href="#"><img src="../assets/sidebar/3.svg" /><span>Планування кар'єри</span></a>
      <a href="#"><img src="../assets/sidebar/4.svg" /><span>Бібліотека</span></a>
      <a href="admin-all-courses.html"><img src="../assets/sidebar/5.svg" /><span>Курси</span></a>
      <a href="#"><img src="../assets/sidebar/6.svg" /><span>Облік практики</span></a>
      <a href="#"><img src="../assets/sidebar/7.svg" /><span>Здоров’я</span></a>
      <a href="#"><img src="../assets/sidebar/8.svg" /><span>Фінанси</span></a>
      <a href="#"><img src="../assets/sidebar/9.svg" /><span>Нерухомість</span></a>
    </nav>
  
    <!-- Настройки + выход -->
    <div style="margin-top: auto;">
      <a href="#"><img src="../assets/sidebar/settings.svg" /><span>Налаштування</span></a>
      <div class="logout" onclick="logoutUser()">
        <img src="../assets/sidebar/log-out.svg" alt="Logout Icon" width="20" height="20" />
        <span>Logout Account</span>
      </div>
    </div>
  </aside>

  <div class="wrap">
    <!-- Header tiles -->
    <div class="tiles">
      <div class="tile tile--green">Редагувати FAQ</div>
      <div class="tile tile--light">Налаштування ментора</div>
    </div>

    <!-- FAQ list -->
    <div id="faqList" class="faq-list"></div>
    <div id="emptyState" class="empty" style="display:none">Поки що немає питань.</div>

    <!-- Add -->
    <div class="add-wrap">
      <button id="btnAdd" class="btn-add">Додати питання</button>
    </div>
  </div>

  <!-- Modal -->
  <div id="modal" class="modal-backdrop" role="dialog" aria-modal="true">
    <div class="modal">
      <h3 id="modalTitle">Нове питання</h3>
      <div class="field">
        <label for="q">Питання</label>
        <input id="q" type="text" placeholder="Введіть питання..." />
      </div>
      <div class="field">
        <label for="a">Відповідь</label>
        <textarea id="a" placeholder="Введіть відповідь..."></textarea>
      </div>
      <div class="modal-actions">
        <button class="btn btn-ghost" id="btnCancel">Скасувати</button>
        <button class="btn btn-primary" id="btnSave">Зберегти</button>
      </div>
    </div>
  </div>

  <script>

    // ==== LOAD (с моками на случай отсутствия API) ====
async function load(){
  try{
    const r = await fetch(API.list);
    if (!r.ok) throw new Error('no api');
    const data = await r.json();
    items = Array.isArray(data) ? data : (data.rows || []);
  } catch {
    // Мок-дані для тесту
    items = [
      {_id:'1', question:'Що таке кар\'єрне планування?', answer:'Процес визначення цілей та шляхів розвитку у професійній сфері.'},
      {_id:'2', question:'Як знайти ментора?', answer:'Шукайте в профільних спільнотах, через колег або на спеціалізованих платформах.'},
      {_id:'3', question:'Чи потрібен план розвитку?', answer:'Так, план допоможе чітко бачити кроки та вимірювати прогрес.'}
    ];
  }
  render();
}
    // ==== CONFIG ====
    const API = {
      list:  '/api/career-faq',
      create:'/api/career-faq',
      update:id => `/api/career-faq/${id}`,
      remove:id => `/api/career-faq/${id}`,
    };

    // ==== STATE ====
    let items = [];
    let editingId = null;

    // ==== DOM ====
    const $list = document.getElementById('faqList');
    const $empty = document.getElementById('emptyState');
    const $modal = document.getElementById('modal');
    const $q = document.getElementById('q');
    const $a = document.getElementById('a');
    const $btnAdd = document.getElementById('btnAdd');
    const $btnSave = document.getElementById('btnSave');
    const $btnCancel = document.getElementById('btnCancel');
    const $modalTitle = document.getElementById('modalTitle');

    // ==== RENDER ====
    function iconPencil(){
      return `
        <svg viewBox="0 0 24 24" fill="none">
          <path d="M4 20h4l10-10-4-4L4 16v4z" stroke="#275D2B" stroke-width="2" stroke-linejoin="round"/>
          <path d="M14 6l4 4" stroke="#275D2B" stroke-width="2" />
        </svg>`;
    }
    function iconTrash(){
      return `
        <svg viewBox="0 0 24 24" fill="none">
          <path d="M3 6h18M8 6V4h8v2m-1 0v14a2 2 0 0 1-2 2h-4a2 2 0 0 1-2-2V6h8z" stroke="#A31D1D" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>`;
    }

    function render(){
      $list.innerHTML = '';
      if (!items.length){ $empty.style.display='block'; return; }
      $empty.style.display='none';

      items.forEach(it=>{
        const el = document.createElement('div');
        el.className = 'faq-item';
        el.innerHTML = `
          <div class="faq-actions">
            <button class="icon-btn js-edit" title="Редагувати" data-id="${it._id}">${iconPencil()}</button>
            <button class="icon-btn js-del" title="Видалити" data-id="${it._id}">${iconTrash()}</button>
          </div>
          <h4 class="faq-q">${escapeHtml(it.question)}</h4>
          <p class="faq-a">${nl2br(escapeHtml(it.answer))}</p>
        `;
        $list.appendChild(el);
      });

      // bind actions
      $list.querySelectorAll('.js-edit').forEach(btn=>{
        btn.addEventListener('click',()=>openEdit(btn.dataset.id));
      });
      $list.querySelectorAll('.js-del').forEach(btn=>{
        btn.addEventListener('click',()=>removeItem(btn.dataset.id));
      });
    }

    function escapeHtml(s=''){
      return s.replace(/[&<>"']/g, m=>({ '&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#039;' }[m]));
    }
    function nl2br(s=''){ return s.replace(/\n/g,'<br/>'); }

    // ==== MODAL ====
    function openCreate(){
      editingId = null;
      $q.value = ''; $a.value = '';
      $modalTitle.textContent = 'Нове питання';
      $modal.style.display='flex';
      $q.focus();
    }
    function openEdit(id){
      const it = items.find(x=>x._id===id);
      if(!it) return;
      editingId = id;
      $q.value = it.question || '';
      $a.value = it.answer || '';
      $modalTitle.textContent = 'Редагувати питання';
      $modal.style.display='flex';
      $q.focus();
    }
    function closeModal(){ $modal.style.display='none'; }

    // ==== API ====
 // ==== SAVE / DELETE (моки) ====
async function save(){
  const payload = { question: $q.value.trim(), answer: $a.value.trim() };
  if (!payload.question || !payload.answer) return alert('Заповніть питання та відповідь');

  if (editingId){
    // редагування в мок-масиві
    const i = items.findIndex(x => x._id === editingId);
    if (i !== -1) items[i] = { ...items[i], ...payload };
  } else {
    // створення в мок-масиві
    items.unshift({ _id: String(Date.now()), ...payload });
  }
  closeModal();
  render();
}

async function removeItem(id){
  // видалення в мок-масиві
  if (!confirm('Видалити питання?')) return;
  items = items.filter(x => x._id !== id);
  render();
}

// ==== EVENTS ====
$btnAdd.addEventListener('click', openCreate);
$btnCancel.addEventListener('click', closeModal);
$btnSave.addEventListener('click', save);
$modal.addEventListener('click', e => { if (e.target === $modal) closeModal(); });

// ==== INIT ====
load();
  </script>
</body>
</html>