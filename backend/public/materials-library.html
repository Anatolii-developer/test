<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>–ú–∞—Ç–µ—Ä—ñ–∞–ª–∏ –º–æ—ó—Ö –∫—É—Ä—Å—ñ–≤</title>
  <link rel="stylesheet" href="styles.css" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
   <aside class="sidebar collapsed" id="sidebar">
    <div class="toggle-button" onclick="toggleSidebar()">
      <img src="assets/sidebar/arrow.svg" alt="Toggle" id="toggleArrow" />
    </div>
    <img class="logo" src="assets/sidebar/IPS Logo (2).svg" alt="Logo" id="logoExpanded" />
    <img class="logo-collapsed" src="assets/sidebar/IPS Logo (1).svg" alt="Logo Small" id="logoCollapsed" />
    <img class="profile" src="assets/profile-photo.png" alt="User" width="40" height="40" />
    <nav>
      <a href="profile.html"><img src="assets/sidebar/profile.svg" /><span>–ü—Ä–æ –ú–µ–Ω–µ</span></a>
      <a href="mycertificates.html"><img src="assets/sidebar/news.svg" /><span>–ú–æ—ó –°–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç–∏</span></a>
      <a href="career-faq.html"><img src="assets/sidebar/10.svg" /><span>–ü–ª–∞–Ω—É–≤–∞–Ω–Ω—è –ö–∞—Ä'—î—Ä–∏</span></a>
      <a href="library.html"><img src="assets/sidebar/3.svg" /><span>–ë—ñ–±–ª—ñ–æ—Ç–µ–∫–∞</span></a>
      <a href="my-courses.html"><img src="assets/sidebar/5.svg" /><span>–ú–æ—ó –ö—É—Ä—Å–∏</span></a>
      <a href="#"><img src="assets/sidebar/8.svg" /><span>–û–±–ª—ñ–∫</span></a>
      <a href="#"><img src="assets/sidebar/4.svg" /><span>–ó–¥–æ—Ä–æ–≤‚Äô—è</span></a>
      <a href="#"><img src="assets/sidebar/9.svg" /><span>–§—ñ–Ω–∞–Ω—Å–∏</span></a>
      <a href="#"><img src="assets/sidebar/6.svg" /><span>–ù–µ—Ä—É—Ö–æ–º—ñ—Å—Ç—å</span></a>
    </nav>
    <div class="logout">
      <img src="assets/sidebar/log-out.svg" alt="Logout Icon" width="20" height="20" />
      <span>–í–∏–π—Ç–∏ –∑ –∞–∫–∞—É–Ω—Ç—É</span>
    </div>
  </aside>

  <main id="mainContent">
    <!-- Title Block -->
    <div class="main-header">
      <h2>–ú–∞—Ç–µ—Ä—ñ–∞–ª–∏ –º–æ—ó—Ö –∫—É—Ä—Å—ñ–≤</h2>
      <img src="assets/library/courses.png" alt="Courses Image" />
    </div>

    <!-- Navigation Buttons -->
    <div class="nav-buttons">
    <a href="library.html">
      <button class="nav-button"><img src="assets/library/arrow-main.svg" alt="Back" />–ì–æ–ª–æ–≤–Ω–∞</button>
    </a>
    <a href="main-library.html">
      <button class="nav-button secondary">–ó–∞–≥–∞–ª—å–Ω—ñ –º–∞—Ç–µ—Ä—ñ–∞–ª–∏</button>
    </a>
      <a href="addons-library.html">
      <button class="nav-button secondary">–î–æ–¥–∞—Ç–∫–æ–≤—ñ –º–∞—Ç–µ—Ä—ñ–∞–ª–∏</button>
    </a>
    </div>
    

    <!-- Content Block -->
    <section class="materials-library-content">

      <!-- Filter -->
      <div class="date-section">
        <label class="date-label">Publishing Date (DD/MM/YYYY)</label>
        <div class="date-inputs">
          <input type="date" class="date-input" />
          <input type="date" class="date-input" />
        </div>
        <div class="filter-btn-wrapper">
          <button class="filter-btn">–§—ñ–ª—å—Ç—Ä—É–≤–∞—Ç–∏</button>
        </div>
      </div>

      <!-- Course Items -->
      <div class="course-list">
        <div class="course-item">
            <h4 class="course-title">¬´–ö—Ä–∏–∑–æ–≤–∞ —ñ–Ω—Ç–µ—Ä–≤–µ–Ω—Ü—ñ—è –≤ –ø—Å–∏—Ö–æ–∞–Ω–∞–ª—ñ—Ç–∏—á–Ω–æ–º—É –ø—ñ–¥—Ö–æ–¥—ñ¬ª</h4>
            <p class="course-description">
              –ú–æ–¥—É–ª—å I –∑ 2-—Ö —Ä—ñ—á–Ω–æ—ó –∫–≤–∞–ª—ñ—Ñ—ñ–∫–∞—Ü—ñ–π–Ω–æ—ó –ø—Ä–æ–≥—Ä–∞–º–∏ –∑ –æ—Ä–≥–∞–Ω—ñ–∑–∞—Ü—ñ—ó –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ç–∏–≤–Ω–æ—ó –≤–∑–∞—î–º–æ–¥—ñ—ó –ø—Å–∏—Ö–æ–ª–æ–≥–∞ –∑ –∫–ª—ñ—î–Ω—Ç–∞–º–∏.
            </p>
            <div class="lecture-materials-row">
              <strong>–ú–∞—Ç–µ—Ä—ñ–∞–ª–∏ –¥–æ –ª–µ–∫—Ü—ñ—ó</strong>
              <button class="view-btn">–ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏</button>
            </div>
          </div>
        

          <div class="course-item">
            <h4 class="course-title">¬´–ö—Ä–∏–∑–æ–≤–∞ —ñ–Ω—Ç–µ—Ä–≤–µ–Ω—Ü—ñ—è –≤ –ø—Å–∏—Ö–æ–∞–Ω–∞–ª—ñ—Ç–∏—á–Ω–æ–º—É –ø—ñ–¥—Ö–æ–¥—ñ¬ª</h4>
            <p class="course-description">–ú–æ–¥—É–ª—å I –∑ 2-—Ö —Ä—ñ—á–Ω–æ—ó –∫–≤–∞–ª—ñ—Ñ—ñ–∫–∞—Ü—ñ–π–Ω–æ—ó –ø—Ä–æ–≥—Ä–∞–º–∏...</p>
          
            <div class="week-block">
              <button class="accordion-toggle">–ú–∞—Ç–µ—Ä—ñ–∞–ª–∏ –¥–æ –ª–µ–∫—Ü—ñ—ó</button>
              <div class="accordion-content">
                <div class="lecture-row">
                  <span>–í—ñ–¥–µ–æ-–º–∞—Ç–µ—Ä—ñ–∞–ª–∏ –¥–æ –ª–µ–∫—Ü—ñ—ó</span>
                  <button class="view-btn">–ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏</button>
                </div>
                <div class="lecture-row">
                  <span>–ö–Ω–∏–∂–∫–æ–≤—ñ –º–∞—Ç–µ—Ä—ñ–∞–ª–∏ –¥–æ –ª–µ–∫—Ü—ñ—ó</span>
                  <button class="view-btn">–ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏</button>
                </div>
              </div>
            </div>
          
            <div class="week-block">
              <button class="accordion-toggle">–ú–∞—Ç–µ—Ä—ñ–∞–ª–∏ –¥–æ —Å—É–ø–µ—Ä–≤—ñ–∑—ñ—ó</button>
              <!-- Empty content for now -->
            </div>
          </div>
        

          <div class="course-item">
            <h4 class="course-title">¬´–ö—Ä–∏–∑–æ–≤–∞ —ñ–Ω—Ç–µ—Ä–≤–µ–Ω—Ü—ñ—è –≤ –ø—Å–∏—Ö–æ–∞–Ω–∞–ª—ñ—Ç–∏—á–Ω–æ–º—É –ø—ñ–¥—Ö–æ–¥—ñ¬ª</h4>
            <p class="course-description">–ú–æ–¥—É–ª—å I –∑ 2-—Ö —Ä—ñ—á–Ω–æ—ó –∫–≤–∞–ª—ñ—Ñ—ñ–∫–∞—Ü—ñ–π–Ω–æ—ó –ø—Ä–æ–≥—Ä–∞–º–∏...</p>
          
            <div class="week-block">
              <button class="accordion-toggle">–ú–∞—Ç–µ—Ä—ñ–∞–ª–∏ –¥–æ –ª–µ–∫—Ü—ñ—ó</button>
              <div class="accordion-content">
                <div class="lecture-row">
                  <span>–í—ñ–¥–µ–æ-–º–∞—Ç–µ—Ä—ñ–∞–ª–∏ –¥–æ –ª–µ–∫—Ü—ñ—ó</span>
                  <button class="view-btn">–ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏</button>
                </div>
                <div class="lecture-row">
                  <span>–ö–Ω–∏–∂–∫–æ–≤—ñ –º–∞—Ç–µ—Ä—ñ–∞–ª–∏ –¥–æ –ª–µ–∫—Ü—ñ—ó</span>
                  <button class="view-btn">–ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏</button>
                </div>
              </div>
            </div>
          
            <div class="week-block">
              <button class="accordion-toggle">–ú–∞—Ç–µ—Ä—ñ–∞–ª–∏ –¥–æ —Å—É–ø–µ—Ä–≤—ñ–∑—ñ—ó</button>
              <!-- Empty content for now -->
            </div>
          </div>
        
      </div>
    </section>
  </main>
  <script src="script.js"></script>
  <script>
    window.onload = () => {
  loadCourseMaterials(); // –∑–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
};

// üîÑ –ü–æ–ª—É—á–µ–Ω–∏–µ –∏ –æ—Ç—Ä–∏—Å–æ–≤–∫–∞ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤
async function loadCourseMaterials() {
  try {
    const response = await fetch("http://157.230.121.24:5050/api/library?destination=courses");
    const materials = await response.json();

    const courseList = document.querySelector(".course-list");
    courseList.innerHTML = ""; // –æ—á–∏—Å—Ç–∫–∞

    if (materials.length === 0) {
      courseList.innerHTML = "<p>–ù–∞—Ä–∞–∑—ñ –º–∞—Ç–µ—Ä—ñ–∞–ª–∏ –≤—ñ–¥—Å—É—Ç–Ω—ñ.</p>";
      return;
    }

    // –ì—Ä—É–ø–ø–∏—Ä—É–µ–º –ø–æ –∑–∞–≥–æ–ª–æ–≤–∫—É (–µ—Å–ª–∏ –≤ –±—É–¥—É—â–µ–º –±—É–¥–µ—Ç courseId ‚Äî –≥—Ä—É–ø–ø–∏—Ä—É–π –ø–æ –Ω–µ–º—É)
    const grouped = {};
    materials.forEach((item) => {
      const key = item.title || "–Ü–Ω—à—ñ –º–∞—Ç–µ—Ä—ñ–∞–ª–∏";
      if (!grouped[key]) grouped[key] = [];
      grouped[key].push(item);
    });

    for (const title in grouped) {
      const courseItem = document.createElement("div");
      courseItem.classList.add("course-item");

      courseItem.innerHTML = `
        <h4 class="course-title">${title}</h4>
        <p class="course-description">–ú–∞—Ç–µ—Ä—ñ–∞–ª–∏, —â–æ –≤—ñ–¥–Ω–æ—Å—è—Ç—å—Å—è –¥–æ –∫—É—Ä—Å—É "${title}"</p>
        <div class="week-block">
          <button class="accordion-toggle">–ú–∞—Ç–µ—Ä—ñ–∞–ª–∏ –¥–æ –ª–µ–∫—Ü—ñ—ó</button>
          <div class="accordion-content"></div>
        </div>
      `;

      const contentBlock = courseItem.querySelector(".accordion-content");

      grouped[title].forEach((mat) => {
        const row = document.createElement("div");
        row.classList.add("lecture-row");

        if (mat.type === "video") {
          row.innerHTML = `
            <span>–í—ñ–¥–µ–æ-–º–∞—Ç–µ—Ä—ñ–∞–ª–∏</span>
            <a class="view-btn" href="${mat.videoLink}" target="_blank">–ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏</a>
          `;
        } else if (mat.type === "book") {
          row.innerHTML = `
            <span>–ö–Ω–∏–∂–∫–æ–≤—ñ –º–∞—Ç–µ—Ä—ñ–∞–ª–∏</span>
            <a class="view-btn" href="http://157.230.121.24:5050/${mat.filePath}" target="_blank">–ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏</a>
          `;
        }

        contentBlock.appendChild(row);
      });

      courseList.appendChild(courseItem);
    }

    initAccordionToggles(); // –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∞–∫–∫–æ—Ä–¥–µ–æ–Ω–æ–≤

  } catch (err) {
    console.error("–ü–æ–º–∏–ª–∫–∞ –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ –º–∞—Ç–µ—Ä—ñ–∞–ª—ñ–≤:", err);
  }
}

// ‚è¨ –ê–∫–∫–æ—Ä–¥–µ–æ–Ω—ã
function initAccordionToggles() {
  document.querySelectorAll(".accordion-toggle").forEach(btn => {
    btn.addEventListener("click", () => {
      const content = btn.nextElementSibling;
      content.style.display = content.style.display === "block" ? "none" : "block";
    });
  });
}

  </script>
</body>
</html>
